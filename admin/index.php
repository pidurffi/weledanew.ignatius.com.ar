<?phpob_start();session_start();error_reporting(E_ALL);$configName = "appBack";

define("APPLICATION_ROOT","../");include_once(APPLICATION_ROOT."galix.php");include_once(GALIX_FOLDER."class.Image.php");if(empty($_GET['module'])) {	$module = $_SPECIFICATION['home'];}else {	// TODO: Validar los modulos	$module = $_GET['module'];}// Delego el trabajo, a menos que sea el loginif(($module!="login")&&($module!="logout")) {	// Login	if($_SPECIFICATION['modules'][$module]['loginRequired']) {		if((!empty($_SPECIFICATION['login']))&&(!empty($_SPECIFICATION['login']['required']))&&($_SPECIFICATION['login']['required'])) {					if(!class_exists($_SPECIFICATION['login']['module'])) {				die("Imposible crear logueo");			}			$login = new $_SPECIFICATION['login']['module']($_SPECIFICATION['login']['params']);			$login->setDb(GlobalManager::getDb());			$login->asegurarAcessoRestringido($module);		}	}	// Menu	if($_SPECIFICATION['menu']) {		$menu = new $_SPECIFICATION['menu']();		GlobalManager::setMenu($menu);	}		// Delego el trabajo	$className = $_SPECIFICATION['modules'][$module]['className'];	$moduleParams = $_SPECIFICATION['modules'][$module]['params']; 	if(!class_exists($className)) die("error, no se definio handler para el modulo $module");	$modClass = new $className($moduleParams);	$modClass->setDb(GlobalManager::getDb());
	$modClass->exec($moduleParams);}else {	// La pagina del login, o del logout. La lógica queda en el login	$login = new $_SPECIFICATION['login']['module']($_SPECIFICATION['login']['params']);	$login->setDb(GlobalManager::getDb());	if($module == "logout") {		$login->logout();	}	else {		$login->login();	}}
?>